# Attend

勤怠管理webアプリ

https://kintai.shimooka.live/

## アプリの説明

企業における管理監督者が、従業員の勤怠等をチェックするためのwebアプリケーションである。
管理者がユーザアカウントを生成し、従業員がログインすることでサイトにアクセスできる。
出勤/退勤ボタンを押し、送信ボタンを押すことで、出勤/退勤打刻が完了となり、管理者サイトにログが届く。

### ユーザー想定

給与計算や労務管理を行っている小規模飲食店のオーナーが利用。
従業員自身がスマホなどを使って打刻しているが、主に2つの問題がある。

* 打刻忘れや、実際の勤務時間と乖離している
* 働き過ぎている

また、気軽に従業員の勤怠をチェックしたいというニーズがある。

## 工夫した点

ユーザの課題に対してそれぞれアプローチした。
打刻忘れや、実際の勤務時間と乖離している問題点に関しては

* 打刻送信前にアラートをつけ、確認を促した。
* 打刻後5分間は打刻を認めないようにした。
* 出勤打刻をしなければならないのに、間違えて退勤打刻を押してしまったときに、対応できるようにした。
* 出勤(退勤)打刻忘れに対して、打刻するはずだった時刻を記入させ、管理者サイトにログを残した。

というアプローチをとった。

また、働き過ぎに対するアプローチに関しては次のようなアプローチをとった。

* 働きすぎている従業員にメッセージを表示し、管理者サイトで、情報を管理した。

ユーザが小売飲食店ということだったので、
昼番を10:00〜16:00、夜番を17:00〜23:00という設定で実装した。勤務時間が7時間を超えた従業員を働きすぎとして、働きすぎリストに、出退勤時間とともに登録した。

管理者サイトには3つのリストがあるが、3つ全てにフィルター機能をつけることで、従業員の打刻状況の管理を容易にした。


## 今後の展望

* 古いレコードの削除
  * 今の状態では、出退勤記録がデータベースに半永久的に保存されることになるので2年前のログは削除するなど、対策を講じていきたい。
* デザインを良くする
  * 管理者サイト以外はcssやjsをあまり使えていないので、殺風景なデザインになってしまっている。
* 打刻忘れを入力するタイミングを、打刻前の状態でできるようにする

### メールを用いた実装
* 打刻忘れを管理者へメールで送信
  * 打刻忘れに関しての対応は、打刻を忘れたユーザが時刻を記入し、提出するタイミングで記入内容を管理者へメールで送信する、という実装を行うのが良いと考えている。
* パスワードを忘れたときの対応
  * ユーザを登録するときに、メールアドレスの登録を行い、メールでパスワード再生成を促す機能をつけていきたい。


## Requirement

必要なライブラリ

* Django                   4.1.7
* django-filter            22.1
* pandas                   1.5.3

## Installation

インストールが必要なライブラリ

```bash
pip install django
pip install pandas
```

## Usage

* 実行環境
```
Python 3.8.10
```
* ローカルサーバで実行する方法

1. Git clone this project
```bash
git clone https://github.com/shimookawataru/attend.git
```

2. プロジェクト直下で以下のコマンドを実行し、秘密鍵を生成する。

```bash
python3 manage.py shell
>>> from django.core.management.utils import get_random_secret_key
>>> get_random_secret_key()
'(秘密鍵)'
```

3. attend/kintai/ に `local_settings.py`を作成し、先程入手した秘密鍵をコピペする。

`local_settings.py`:
```bash
SECRET_KEY = '(秘密鍵)'
```

4. マイグレーションファイルを作成し、データベースに適用する。
```bash
python3 manage.py makemigrations
python3 manage.py migrate
```
5. 管理者ユーザの情報を登録する。
```bash
python3 manage.py createsuperuser
```
管理者ユーザの情報:
```bash
ユーザー名:
メールアドレス:
Password: 
Password (again): 
```

1. run server
```
python3 manage.py runserver
```

## 管理者以外のユーザの登録方法
1. 管理者サイトにログイン

2. 下図のユーザーの部分をクリック

![管理者サイトのスクリーンショット1](https://user-images.githubusercontent.com/84301337/226108785-beced5a8-3439-4d7e-82b7-a2ad8f172e26.png)

3. 右上の「ユーザーを追加」の部分をクリック

![管理者サイトのスクリーンショット2](https://user-images.githubusercontent.com/84301337/226108781-3123758d-2ba8-41d4-9de8-49964fff0fa5.png)

4. ユーザーIDとパスワードを入力


## 参考にしたサイト
[Djangoで勤怠管理Webアプリケーションを作ってみた](https://qiita.com/TARO7777/items/ed2865a5b492aad9dfb2)
